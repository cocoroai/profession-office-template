<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>無料相談予約 | 山田総合法務事務所</title>
    <meta name="description" content="山田総合法務事務所の無料相談予約。カレンダーから簡単に予約できます。第3希望まで選択可能。">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ヘッダー -->
    <header>
        <div class="container">
            <div class="header-wrapper">
                <a href="index.html" class="logo">山田総合法務事務所</a>
                <button class="mobile-menu-btn" onclick="toggleMenu()">☰</button>
                <nav id="nav-menu">
                    <ul>
                        <li><a href="index.html">ホーム</a></li>
                        <li><a href="services.html">業務内容</a></li>
                        <li><a href="pricing.html">料金案内</a></li>
                        <li><a href="profile.html">代表プロフィール</a></li>
                        <li><a href="faq.html">よくある質問</a></li>
                        <li><a href="contact.html">お問い合わせ</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main>
        <section>
            <div class="container">
                <h1>無料相談予約</h1>
                <p class="text-center mb-40">初回相談は60分まで無料です。カレンダーから第3希望まで選択できます。</p>
            </div>
        </section>

        <!-- 予約フォーム -->
        <section style="background-color: #f8f9fa;">
            <div class="container">
                <div class="grid grid-2" style="gap: 40px;" id="reservation-grid">
                    <!-- 左側：カレンダー -->
                    <div id="calendar-section">
                        <h2>日時を選択</h2>
                        
                        <!-- カレンダー -->
                        <div class="calendar-container">
                            <div class="calendar-header">
                                <h3 id="calendar-month">2024年1月</h3>
                                <div class="calendar-nav">
                                    <button class="calendar-btn" onclick="previousMonth()">＜ 前月</button>
                                    <button class="calendar-btn" onclick="nextMonth()">次月 ＞</button>
                                </div>
                            </div>
                            
                            <div class="calendar-grid">
                                <!-- 曜日ヘッダー -->
                                <div class="calendar-day-header">日</div>
                                <div class="calendar-day-header">月</div>
                                <div class="calendar-day-header">火</div>
                                <div class="calendar-day-header">水</div>
                                <div class="calendar-day-header">木</div>
                                <div class="calendar-day-header">金</div>
                                <div class="calendar-day-header">土</div>
                            </div>
                            
                            <!-- カレンダー日付（JavaScriptで動的生成） -->
                            <div class="calendar-grid" id="calendar-days"></div>
                        </div>

                        <!-- 時間選択 -->
                        <div id="time-selection" style="display: none;">
                            <h3 class="mt-40">時間を選択</h3>
                            <div class="time-slots" id="time-slots">
                                <!-- 時間スロット（JavaScriptで動的生成） -->
                            </div>
                        </div>

                        <!-- 選択した予約 -->
                        <div class="reservation-selections" id="reservation-selections" style="display: none;">
                            <h3>選択した日時（最大3つまで）</h3>
                            <div id="selected-reservations">
                                <!-- 選択された予約（JavaScriptで動的生成） -->
                            </div>
                            <p class="mt-20" style="color: #6b7280; font-size: 14px;">
                                ※第1希望から優先的に確定します<br>
                                ※予約確定後、メールで詳細をお送りします
                            </p>
                        </div>
                    </div>

                    <!-- 右側：入力フォーム -->
                    <div id="form-section">
                        <h2>お客様情報</h2>
                        <div class="card">
                            <form id="reservation-form" action="#" method="post">
                                <div class="form-group">
                                    <label for="name">お名前 <span style="color: #dc2626;">*必須</span></label>
                                    <input type="text" id="name" name="name" required>
                                </div>

                                <div class="form-group">
                                    <label for="furigana">フリガナ <span style="color: #dc2626;">*必須</span></label>
                                    <input type="text" id="furigana" name="furigana" required>
                                </div>

                                <div class="form-group">
                                    <label for="email">メールアドレス <span style="color: #dc2626;">*必須</span></label>
                                    <input type="email" id="email" name="email" required>
                                </div>

                                <div class="form-group">
                                    <label for="tel">電話番号 <span style="color: #dc2626;">*必須</span></label>
                                    <input type="tel" id="tel" name="tel" required>
                                </div>

                                <div class="form-group">
                                    <label for="company">会社名・団体名</label>
                                    <input type="text" id="company" name="company">
                                </div>

                                <div class="form-group">
                                    <label for="consultation-subject">相談内容 <span style="color: #dc2626;">*必須</span></label>
                                    <select id="consultation-subject" name="consultation-subject" required>
                                        <option value="">選択してください</option>
                                        <option value="法人設立">法人設立・会社設立</option>
                                        <option value="許認可">許認可申請</option>
                                        <option value="税務相談">税務相談・申告</option>
                                        <option value="相続遺言">相続・遺言</option>
                                        <option value="不動産登記">不動産登記</option>
                                        <option value="契約書作成">契約書作成</option>
                                        <option value="その他">その他</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="consultation-method">相談方法 <span style="color: #dc2626;">*必須</span></label>
                                    <select id="consultation-method" name="consultation-method" required>
                                        <option value="来所">事務所での対面相談</option>
                                        <option value="オンライン">オンライン相談（Zoom等）</option>
                                        <option value="電話">電話相談</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="message">相談内容の詳細</label>
                                    <textarea id="message" name="message" rows="5" placeholder="ご相談内容を簡単にご記入ください（任意）"></textarea>
                                </div>

                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" name="privacy" required style="width: auto; margin-right: 10px;">
                                        <span>個人情報保護方針に同意する <span style="color: #dc2626;">*必須</span></span>
                                    </label>
                                </div>

                                <!-- 選択した日時（hidden） -->
                                <input type="hidden" id="selected-dates" name="selected-dates">

                                <div class="text-center mt-40">
                                    <button type="submit" class="btn btn-primary" id="submit-btn" disabled>予約内容を確認する</button>
                                </div>
                            </form>
                        </div>

                        <div class="card mt-20" style="background-color: #fee2e2;">
                            <h3 style="color: #dc2626; font-size: 16px;">ご予約にあたってのお願い</h3>
                            <ul style="font-size: 14px; margin: 0;">
                                <li>キャンセルの場合は前日までにご連絡ください</li>
                                <li>相談時間は60分を目安としています</li>
                                <li>関連書類がある場合はご持参ください</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 予約の流れ -->
        <section>
            <div class="container">
                <h2>予約の流れ</h2>
                <div class="grid grid-3">
                    <div class="card text-center">
                        <h3 style="color: #1e3a8a; font-size: 48px; margin-bottom: 10px;">1</h3>
                        <h4>日時を選択</h4>
                        <p>カレンダーから希望日を選び、時間を選択。第3希望まで選べます。</p>
                    </div>
                    <div class="card text-center">
                        <h3 style="color: #1e3a8a; font-size: 48px; margin-bottom: 10px;">2</h3>
                        <h4>情報を入力</h4>
                        <p>お名前、連絡先、相談内容など必要事項を入力します。</p>
                    </div>
                    <div class="card text-center">
                        <h3 style="color: #1e3a8a; font-size: 48px; margin-bottom: 10px;">3</h3>
                        <h4>予約完了</h4>
                        <p>確認メールが届きます。当日は時間になりましたらお越しください。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA -->
        <section style="background-color: #1e3a8a; color: #fff;">
            <div class="container text-center">
                <h2 style="color: #fff;">お電話でのご予約も承っております</h2>
                <p style="font-size: 36px; font-weight: bold; margin: 20px 0;">03-1234-5678</p>
                <p>平日 9:00〜18:00 / 土曜 10:00〜15:00（要予約）</p>
            </div>
        </section>
    </main>

    <!-- フッター -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>山田総合法務事務所</h3>
                    <p>〒100-0001<br>
                    東京都千代田区千代田1-1-1<br>
                    山田ビル5階</p>
                    <p>TEL: 03-1234-5678<br>
                    FAX: 03-1234-5679<br>
                    Email: info@yamada-law.jp</p>
                </div>
                <div class="footer-section">
                    <h3>営業時間</h3>
                    <p>平日: 9:00〜18:00<br>
                    土曜: 10:00〜15:00（要予約）<br>
                    日曜・祝日: 休業</p>
                    <p>※緊急のご相談は時間外も対応可能です</p>
                </div>
                <div class="footer-section">
                    <h3>アクセス</h3>
                    <p>JR東京駅 徒歩5分<br>
                    地下鉄大手町駅 徒歩3分</p>
                    <p><a href="https://maps.google.com/?q=東京都千代田区千代田1-1-1" target="_blank">アクセスマップを見る</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 山田総合法務事務所. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // カレンダー機能
        let currentDate = new Date();
        let selectedDates = [];
        const maxSelections = 3;
        
        // 現在の日付から開始（過去日は選択不可にするため）
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        function toggleMenu() {
            const nav = document.getElementById('nav-menu');
            nav.classList.toggle('active');
        }

        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            document.getElementById('calendar-month').textContent = `${year}年${month + 1}月`;
            
            let calendarHTML = '';
            
            // 前月の空白
            for (let i = 0; i < firstDay; i++) {
                calendarHTML += '<div class="calendar-day disabled"></div>';
            }
            
            // 当月の日付
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                date.setHours(0, 0, 0, 0);
                const isWeekend = date.getDay() === 0 || date.getDay() === 6;
                const isPast = date < today;
                const isDisabled = isPast || isWeekend;
                
                calendarHTML += `
                    <div class="calendar-day ${isDisabled ? 'disabled' : ''}" 
                         onclick="${!isDisabled ? `selectDate(${year}, ${month}, ${day})` : ''}">
                        <div class="calendar-day-number">${day}</div>
                        <div class="calendar-day-status">
                            ${isWeekend ? '休業' : (isPast ? '-' : '空き有')}
                        </div>
                    </div>
                `;
            }
            
            // 月末の残り空白（必要に応じて）
            const totalCells = firstDay + daysInMonth;
            const remainingCells = 42 - totalCells; // 6週間 x 7日 = 42セル
            for (let i = 0; i < Math.min(remainingCells, 7); i++) {
                calendarHTML += '<div class="calendar-day disabled"></div>';
            }
            
            document.getElementById('calendar-days').innerHTML = calendarHTML;
            updateSelectedDatesDisplay();
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        function selectDate(year, month, day) {
            const selectedDate = new Date(year, month, day);
            document.getElementById('time-selection').style.display = 'block';
            
            // 時間スロットを表示
            const timeSlots = ['9:00', '10:00', '11:00', '13:00', '14:00', '15:00', '16:00', '17:00'];
            let timeSlotsHTML = '';
            
            timeSlots.forEach(time => {
                // ランダムに一部を予約済みに
                const isDisabled = Math.random() < 0.3;
                timeSlotsHTML += `
                    <div class="time-slot ${isDisabled ? 'disabled' : ''}" 
                         onclick="${!isDisabled ? `selectTime('${year}-${month + 1}-${day}', '${time}')` : ''}">
                        ${isDisabled ? '× ' : ''}${time}
                    </div>
                `;
            });
            
            document.getElementById('time-slots').innerHTML = timeSlotsHTML;
        }

        function selectTime(date, time) {
            if (selectedDates.length >= maxSelections) {
                alert('予約は第3希望まで選択できます。');
                return;
            }
            
            const reservation = `${date} ${time}`;
            if (!selectedDates.includes(reservation)) {
                selectedDates.push(reservation);
                updateSelectedDatesDisplay();
            }
        }

        function updateSelectedDatesDisplay() {
            if (selectedDates.length > 0) {
                document.getElementById('reservation-selections').style.display = 'block';
                document.getElementById('submit-btn').disabled = false;
                
                let html = '';
                selectedDates.forEach((date, index) => {
                    html += `
                        <div class="reservation-item">
                            <span>第${index + 1}希望: ${formatDate(date)}</span>
                            <button type="button" onclick="removeReservation(${index})">削除</button>
                        </div>
                    `;
                });
                
                document.getElementById('selected-reservations').innerHTML = html;
                document.getElementById('selected-dates').value = selectedDates.join(',');
            } else {
                document.getElementById('reservation-selections').style.display = 'none';
                document.getElementById('submit-btn').disabled = true;
            }
        }

        function removeReservation(index) {
            selectedDates.splice(index, 1);
            updateSelectedDatesDisplay();
        }

        function formatDate(dateString) {
            const parts = dateString.split(' ');
            const dateParts = parts[0].split('-');
            const time = parts[1];
            return `${dateParts[0]}年${dateParts[1]}月${dateParts[2]}日 ${time}〜`;
        }

        // フォーム送信
        document.getElementById('reservation-form').addEventListener('submit', function(e) {
            e.preventDefault();
            if (selectedDates.length === 0) {
                alert('日時を選択してください。');
                return;
            }
            
            // 実際の実装では、ここでサーバーに送信
            alert('予約内容を確認中です...\n\n' + 
                  '選択した日時：\n' + 
                  selectedDates.map((d, i) => `第${i + 1}希望: ${formatDate(d)}`).join('\n'));
        });

        // レスポンシブ対応
        function handleResize() {
            const isMobile = window.innerWidth <= 768;
            const reservationGrid = document.getElementById('reservation-grid');
            const calendarSection = document.getElementById('calendar-section');
            const formSection = document.getElementById('form-section');
            
            if (isMobile) {
                // スマホでは縦並び、カレンダーを上に
                reservationGrid.style.display = 'block';
                calendarSection.style.marginBottom = '30px';
            } else {
                // PCでは横並び
                reservationGrid.style.display = 'grid';
                calendarSection.style.marginBottom = '0';
            }
        }

        // 画面サイズ変更時の対応
        window.addEventListener('resize', handleResize);
        
        // 初期表示
        handleResize();
        renderCalendar();
    </script>
</body>
</html>